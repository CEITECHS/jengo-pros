# Proffesionals/Experts API - Pros API 
# Pros API spec in YAML
swagger: '2.0'
info:
  title: Pros API
  description:  Pros API - is an API to track Contractor work done by proffessionals       or experts in different domain. A contactor can be a person or a company.
  version: "0.0.1"
# Host Url
host: api.pros.com
produces: 
  - application/json
paths:
  /pros/signup:
   post:
      description: Create new contractor for sign up.
      produces:
        - application/json
      parameters:
        - name: contractor
          in: body
          description: Pro's basic information for registration.
          required: true
          schema:
            $ref: '#/definitions/Pro'
      responses:
        200:
          description: Successful created.
          schema:
            $ref: '#/definitions/Pro'
        default:
          description: An error with a status code between 4XX and 5XX
          schema:
            $ref: '#/definitions/Error'
  /pros/activate/{activationCode}:
    put:
      summary: Activation endpoint.
      parameters:
        - name: activationCode
          in: path
          description: Activation code to verify
          required: true
          type: string
      responses:
        200:
          description: sucessful operation.
        default:
          description: An error with a status code between 4XX and 5XX
          schema:
            $ref: '#/definitions/Error'
  /pros/login:
    get:
      summary: Login endpoint
      parameters:
        - name: email
          type: string
          in: query
        - name: password
          type: string
          in: query
      responses:
        200:
          description: succesful operation
        default:
          description: An error with a status code between 4XX and 5XX
          schema:
            $ref: '#/definitions/Error'
  /pros:
     get:
      summary: pros list
      description: |
        This pros endpoint returns information summay about pro who are offering 
        various services. The response includes pro basic information and services they offer.
      parameters:
        - name: page
          in: query
          description: A page number of the returned value. Default is one.
          type: integer
          format: int32
          required: false
        - name: size
          in: query
          description: Number of items to retrieve in a page. Default is 10. Maximum is 100.
          type: integer
          format: int32
          required: false
      responses: 
        200: 
          description: An array of pro with basic information and services they've to offer.
          schema:
            type: array
            items:
              $ref: '#/definitions/Pro'
        default:
          description: An error with a status code between 4XX and 5XX
          schema:
            $ref: '#/definitions/Error'
  /pros/{proReferenceId}/profile:
    get:
      description: |
        The pros endpoint returns information for a specific pro.
      parameters:
        - name: proReferenceId
          in: path
          description: Unique pro identifier which its result will be returned.
          required: true
          type: integer
      responses:
        200:
          description: pro's information.
          schema:
            $ref: '#/definitions/ProDetails'
        default:
          description: An error with a status code between 4XX and 5XX
          schema:
            $ref: '#/definitions/Error'
    put:
      summary: Update pro information.
      description: The endpoint to update pro information.
      produces:
        - application/json
        - application/xml
      parameters:
        - name: proReferenceId
          in: path
          description: Unique pro identifier which its information will be updated.
          required: true
          type: integer
        - name: body
          in: body
          description: Updated pro object.
          required: true
          schema:
            $ref: '#/definitions/ProDetails'
      responses:
        200:
          description: Successful operation
          schema:
            $ref: '#/definitions/ProDetails'
        default:
          description: An error with a status code between 4XX and 5XX
          schema:
            $ref: '#/definitions/Error'
    delete:
      summary: Delete pro information.
      description: The endpoint to delete pro information.
      produces:
        - application/json
        - application/xml
      parameters:
        - name: proReferenceId
          in: path
          description: Unique pro identifier which its information will be deleted.
          required: true
          type: integer
      responses:
        200:
          description: Successful operation
        default:
          description: An error with a status code between 4XX and 5XX
          schema:
            $ref: '#/definitions/Error'
  /pros/{proReferenceId}/profile/changePassword:
    put:
      parameters:
        - name: proReferenceId
          in: path
          description: Unique Pro Identifier for the pro profile.
          required: true
          type: integer
        - name: body
          in: body
          description: Updated object to update.
          required: true
          schema:
            $ref: '#/definitions/ChangePasswordObject'
      responses:
        200:
          description: Successful operation
        default:
          description: Unexpected Error
          schema:
            $ref: '#/definitions/Error'
        
  /pros/{proReferenceId}/attachments:
    get:
      summary: Retrieve pro's attachments.
      description: The endpoint is used to retrieve all personal attachments associated with this pro ID. Not proffessional education attachments.
      produces:
        - application/json
        - application/xml
      parameters:
      - name: proReferenceId
        in: path
        description: Unique Pro Identifier which owns all retrieved attachments.
        required: true
        type: integer
      responses:
        200:
          description: Pro's attachments.
          schema:
            type: array
            items:
              $ref: '#/definitions/Attachment'
        default:
          description: An error with a status code between 4XX and 5XX
          schema:
            $ref: '#/definitions/Error'
  /pros/{proReferenceId}/projects:
    get:
      summary: Retrieve Pro's projects.
      description: The endpoint is used to retrieve all projects on pro's profile associated with the given pro ID.
      produces:
        - application/json
        - application/xml
      parameters:
      - name: proReferenceId
        in: path
        description: Unique Pro Identifier which owns all retrieved projects.
        required: true
        type: integer
      responses:
        200:
          description: pro's completed projects.
          schema:
            type: array
            items:
              $ref: '#/definitions/Project'
        default:
          description: An error with a status code between 4XX and 5XX
          schema:
            $ref: '#/definitions/Error'
  /pros/{proReferenceId}/services:
    get:
      summary: Retrieve Pro's services offered.
      description: The endpoint is used to retrieve all services on pro's profile associated with the given pro ID.
      produces:
        - application/json
        - application/xml
      parameters:
      - name: proReferenceId
        in: path
        description: Unique pro Identifier which owns all retrieved services.
        required: true
        type: integer
      responses:
        200:
          description: Pro's services.
          schema:
            type: array
            items:
              $ref: '#/definitions/ServiceOffering'
        default:
          description: An error with a status code between 4XX and 5XX
          schema:
            $ref: '#/definitions/Error'
definitions:
   ProDetails:
    type: object
    properties:
      basicInfo:
       $ref: '#/definitions/Pro'
      profilePicture:
       $ref: '#/definitions/Attachment'
      photoID:
        $ref: '#/definitions/Attachment'
      projects:
        description: a list a projects a pro has participated in and completed
        type: array
        items:
          $ref: '#/definitions/Project'
   Pro:
    type: object
    required:
      - firstName
      - lastName
      - introText
      - emailAddress
      - phone
      - password
      - operatingAs
    properties:
      proReferenceId:
       type: string
      operatingAs:
       type: string
       description: operating model of the pro , allowed values is [Company or Individual] Ex. Individual
       default: Individual
      company:
       type: object
       description: company details for non-individual pros
       properties: 
        businessName:
         type: string
        phone:
         $ref: '#/definitions/Phone'
        emailAddress:
         type: string
        address:
         $ref: '#/definitions/Address'
      firstName:
        type: string
      lastName:
       type: string
      middleName:
       type: string
      introText:
       type: string
      phone:
       $ref: '#/definitions/Phone'
      address :
       $ref: '#/definitions/Address'
      emailAddress:
        type: string
      password:
        type: string
      serviceOfferings:
        description: a list of services offered by a pro
        type: array
        items:
         $ref: '#/definitions/ServiceOffering'
   Attachment:
    type: object
    required:
      - id
      - name
      - byteArray
      - extension
    properties:
      id:
        type: integer
        description: Attachment ID.
      name:
        type: string
        description: Attachment file name
      byteArray:
        type: object
        description: Array stream of the attachment content.
      extension:
        type: string
        description: File extension of an attachment. eg. pdf, txt, doc, exls.
   Project:
    type: object
    required:
      - projectName
      - client
      - offeredServices
      - startDate
    properties:
      projectName:
        type: string
      startDate:
       type: string
       description: the first date to a contractor started on this project Ex. 2016-05-30
       format: yyyy-MM-dd
      endDate:
       type: string
       description: latest/last date to a contractor worked on this project Ex. 2016-07-30
       format: yyyy-MM-dd
      client:
        type: object
        properties:
         fistName:
          type: string
          description: client or project supervisor firstName
         lastName:
          type: string
          description: client or project supervisor lastName
         phoneNumber:
          type: string
         emailAddress:
          type: string
      offeredServices:
        description: services offered by this pro on this particular project
        type: array
        items:
          $ref: '#/definitions/ServiceOffering'
   ServiceOffering:
    type: object
    properties:
      serviceId:
        type: string
        description: Unique identifier for the service
      serviceDescription:
        type: string
        description : description of the offered service 
   Phone:
    type: object
    properties:
      phoneNumber:
        type: string
        description: Phone number of the pro.
      isPrimary:
        type: boolean
        description: Most prefered to be contacted with.
      contactMethod:
        type: string
        description: method you want to be contacted using this phone number. Either by text or call.
   Address:
    type: object
    properties:
      longtude:
        type: number
        format: double
        description: Longtude of an address (location)
      latitude:
        type: number
        format: double
        description: Latitude of an address (location)
      street:
        type: string
        description: Street name of an address.
      district:
        type: string
        description: District name of an address.
      region:
        type: string
        description: Region name of an address.
      country:
        type: string
        description: Country name of an address.
   ChangePasswordObject:
    type: object
    properties:
      proReferenceId:
        type: string
      email:
       type: string
      oldPassword:
        type: string
      newPassword:
        type: string
   Error:
    type: object
    properties:
     title:
       type: string
     status:
       type: integer
       format: int32
     detail:
       type: string
     timeStamp:
      type: number
     developerMessage:
      type: string
     errors:
      type: array
      description: an Array of errors messages occured
      items:
          type: string
          description: a specific error message